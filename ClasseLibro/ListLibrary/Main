import mensola.Libro;

import static frontScreen.FrontEnd.*;

import java.util.ArrayList;
import java.util.Scanner;

import static utility.Tools.*;

public class ListLibrary {
    public static void main(String[] args) {
        Scanner tastiera = new Scanner(System.in);
        boolean uscita = false;
        final int MAXLIBRI = 3;
        ArrayList<Libro> mensola = new ArrayList<Libro>(MAXLIBRI);
        int cont = 0;

        do {
            String[] opzioni = {"---MENSOLA---", "1. Inserimento", "2. Visualizzazione", "3. Cancellazione", "4. Fine"};
            int scelta = Menu(opzioni, tastiera);

            switch (scelta) {
                case 1 -> {
                    System.out.println("Inserimento");
                    if (cont < MAXLIBRI) {
                        Libro nuovoLibro = LeggiLibro(tastiera);

                        if (!libroDoppio(mensola, nuovoLibro))
                            mensola.add(nuovoLibro);
                        else
                            System.out.println("Libro gia' presente");

                        cont++;
                    } else 
                        System.out.println("Mensola piena");
                    


                }

                case 2 -> {
                    System.out.println("Visualizzazione");
                    mensola.forEach(l -> System.out.println(l.FormattaDati()));
                }

                case 3 -> {
                    System.out.println("Cancellazione");
                    System.out.println("Inserisci un titolo: ");
                    String title = tastiera.nextLine();
                    mensola.removeIf(l -> l.Titolo.equals(title));

                }

                case 4 -> {
                    System.out.println("Fine");
                    uscita = true;
                }
            }

        } while (!uscita);
    }


    public static boolean libroDoppio(ArrayList<Libro> mensola, Libro nuovoLibro) {
        for (Libro libro : mensola) {
            if (nuovoLibro.Autore.equals(libro.Autore) && nuovoLibro.Titolo.equals(libro.Titolo))
                return true;
        }
        return false;
    }


}
